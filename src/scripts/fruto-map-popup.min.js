Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,o){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(0===n)return!1;var l,r,i=0|o,a=Math.max(0<=i?i:n-Math.abs(i),0);for(;a<n;){if((l=t[a])===(r=e)||"number"==typeof l&&"number"==typeof r&&isNaN(l)&&isNaN(r))return!0;a++}return!1}});var levelItems=Array.prototype.slice.call(document.querySelectorAll(".level__item")).filter(function(e){return Array.prototype.slice.call(e.classList).includes("wait-block")?void 0:e});function closePopup(){var o=document.querySelectorAll(".popup-overlay");document.addEventListener("keydown",function(e){27===e.keyCode&&o.forEach(function(e){e.style.display="none"})})}closePopup();var gameBlock=document.querySelector(".game-block"),closePopupBtn=document.querySelector(".btn-close"),overlay=document.querySelector(".overlay"),pageHeaderToggle=document.querySelector(".page-header__toggle"),mainNav=document.querySelector(".main-nav"),moveBlock=document.querySelector(".move-wrapper"),contentHeight=document.querySelector(".bg-wrapper--map"),fruitItem=document.querySelector(".fruit-item__left-4"),soonButton=document.querySelector(".level__item--date"),soonPopupOverlay=document.querySelector(".date-popup"),soonPopup=soonPopupOverlay.querySelector(".popup-item"),soonPopupClose=soonPopup.querySelector(".popup-close"),levelQuestion=document.querySelector(".level__item--wait");soonButton.addEventListener("click",function(e){soonPopupOverlay.style.display="flex",soonPopup.style.display="block"}),soonPopupClose.addEventListener("click",function(){soonPopupOverlay.style.display="none",soonPopup.style.display="none"});var ideaButtons=document.querySelectorAll(".wait-block:not(.level__item--date)");ideaButtons.forEach(function(e){e.addEventListener("click",function(){ideaPopupOverlay.style.display="flex",ideaPopup.style.display="block"})});var contestButton=document.querySelector(".contest"),beeTopButton=document.querySelector(".img-block--top"),beeBottomButton=document.querySelector(".img-block--bottom"),beeDescriptionButton=document.querySelector(".bee");beeDescriptionButton.addEventListener("click",function(e){mainNav.classList.add("main-nav--closed"),ideaPopupOverlay.style.display="flex",ideaPopup.style.display="block"});var ideaPopupOverlay=document.querySelector(".popup-idea"),ideaPopup=ideaPopupOverlay.querySelector(".popup-item"),ideaPopupClose=ideaPopup.querySelector(".popup-close");contestButton.addEventListener("click",function(){ideaPopupOverlay.style.display="flex",ideaPopup.style.display="block"}),beeTopButton.addEventListener("click",function(){ideaPopupOverlay.style.display="flex",ideaPopup.style.display="block"}),beeBottomButton.addEventListener("click",function(){ideaPopupOverlay.style.display="flex",ideaPopup.style.display="block"}),ideaPopupClose.addEventListener("click",function(){ideaPopupOverlay.style.display="none",ideaPopup.style.display="none"});var currentLevelIdx=1,viewPort=document.querySelector(".bg-wrapper--map");function openLevelPopup(u){u.addEventListener("click",function(e){var o=u.className.split(" ")[currentLevelIdx],t=new XMLHttpRequest;if(t.open("GET","fruto-map-level.json",!1),t.send(),200!=t.status)alert(t.status+": "+t.statusText);else{var n=JSON.parse(t.responseText)[o],l=gameBlock.querySelector(".game-title"),r=gameBlock.querySelector(".list-items"),i=document.createElement("span");i.innerHTML="Вам понадобится",r.appendChild(i);var a=gameBlock.querySelector(".rules-info .description"),c=gameBlock.querySelector(".product-info__image img"),p=gameBlock.querySelector(".animating"),s=gameBlock.querySelector(".product-info__text .description");l.innerHTML=n.levelName,n.ingredients.forEach(function(e,o){var t=document.createElement("li");t.innerHTML=n.ingredients[o],t.classList.add("list-items__item"),r.appendChild(t)}),a.innerHTML=n.description,c.setAttribute("src","./"+n.productSrc),console.log(n.animationSrc),p.setAttribute("src","./"+n.animationSrc),s.innerHTML=n.productText,mainNav.classList.add("main-nav--closed"),viewPort.classList.add("bg-wrapper--map-popup"),moveBlock.style.display="none",overlay.style.display="block",gameBlock.style.display="block",contentHeight.style.overflow="hidden",fruitItem.style.display="none"}})}function closeAndClearPopup(){viewPort.classList.remove("bg-wrapper--map-popup"),moveBlock.style.display="block",overlay.style.display="none",gameBlock.querySelector(".list-items").innerHTML="",gameBlock.style.display="none",contentHeight.style.overflow="visible"}levelItems.forEach(function(e){openLevelPopup(e)}),levelItems.forEach(function(e){e.addEventListener("click",function(e){document.addEventListener("keydown",function(e){27===e.keyCode&&closeAndClearPopup()})})}),closePopupBtn.addEventListener("click",function(e){closeAndClearPopup()}),pageHeaderToggle.addEventListener("click",function(e){document.addEventListener("keydown",function(e){console.log(e),27===e.keyCode&&mainNav.classList.add("main-nav--closed")})});
